{"version":3,"sources":["BooksAPI.js","components/Books.js","components/Search.js","components/Header.js","components/BookShelf.js","components/Home.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","getAll","fetch","then","res","json","data","books","update","id","shelf","method","body","JSON","stringify","search","query","Books","items","handleSelect","filter","item","map","title","authors","imageLinks","className","style","width","height","backgroundImage","thumbnail","onChange","e","value","disabled","join","Search","onShelfChange","searchedBooks","to","type","placeholder","autoFocus","Header","BookShelf","shelfTitle","currentBooks","Home","BooksApp","state","timeout","debounce","fn","delay","persist","setState","target","clearTimeout","setTimeout","handleChange","a","BooksAPI","error","book","find","this","debounced","path","render","props","exact","React","Component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.24dd0c1f.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (id, shelf) =>\n  fetch(`${api}/books/${id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React from 'react'\r\n\r\nfunction Books({items,handleSelect,shelf}) {\r\n    const books = shelf ? items.filter(item => item.shelf === shelf) : items;\r\n    return (\r\n        <>\r\n            {books.map(({id,title,authors,imageLinks,shelf}) => (\r\n                <li key={id}>\r\n                    <div className=\"book\">\r\n                    <div className=\"book-top\">\r\n                        <div className=\"book-cover\" style={{ width: 128, height: 193, backgroundImage: `url(${imageLinks? imageLinks.thumbnail : 'https://via.placeholder.com/128x193.gif/000/fff?text=Sorry+No+Image+For+This+Book'})` }}></div>\r\n                        <div className=\"book-shelf-changer\">\r\n                        <select onChange={e => handleSelect(e,id)} value={shelf}>\r\n                            <option value=\"move\" disabled>Move to...</option>\r\n                            <option value=\"currentlyReading\">Currently Reading</option>\r\n                            <option value=\"wantToRead\">Want to Read</option>\r\n                            <option value=\"read\">Read</option>\r\n                            <option value=\"none\">None</option>\r\n                        </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"book-title\">{title}</div>\r\n                    <div className=\"book-authors\">{authors ? authors.join(' / ') : 'UnKnown Author'}</div>\r\n                    </div>\r\n                </li>\r\n            )) }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Books;","import React from 'react'\r\nimport Books from './Books'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nfunction Search({onShelfChange,value,searchedBooks,handleSelect}) {\r\n    return (\r\n        <div className=\"search-books\">\r\n            <div className=\"search-books-bar\">\r\n                <Link to=\"/\" className=\"close-search\">Close</Link>\r\n                <div className=\"search-books-input-wrapper\">\r\n                    <input type=\"text\" placeholder=\"Search by title or author\" onChange={onShelfChange} value={value} autoFocus/>\r\n                </div>\r\n            </div>\r\n            <div className=\"search-books-results\">\r\n                <ol className=\"books-grid\">\r\n                    <Books items={searchedBooks} handleSelect={handleSelect}/>\r\n                </ol>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search","import React from 'react'\r\n\r\nfunction Header({title}) {\r\n    return (\r\n        <div className=\"list-books-title\">\r\n            <h1>{title}</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;","import React from 'react'\r\nimport Books from './Books'\r\n\r\nfunction BookShelf({shelfTitle,currentBooks,handleSelect,shelf}) {\r\n    return (\r\n        <div className=\"bookshelf\">\r\n            <h2 className=\"bookshelf-title\">{shelfTitle}</h2>\r\n            <div className=\"bookshelf-books\">\r\n                <ol className=\"books-grid\">\r\n                    <Books items={currentBooks} handleSelect={handleSelect} shelf={shelf} />\r\n                </ol>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookShelf","import React from 'react'\r\nimport Header from './Header'\r\nimport BookShelf from './BookShelf';\r\nimport { Link } from \"react-router-dom\"\r\n\r\nfunction Home({currentBooks,handleSelect}) {\r\n    const shelves = [['Currently Reading', 'currentlyReading'],['Want to Read', 'wantToRead'],['Read', 'read']];\r\n    return (\r\n        <div className=\"list-books\">\r\n            <Header title='MyReads' />\r\n            <div className=\"list-books-content\">\r\n                {shelves.map(([shelfTitle,shelf]) => \r\n                    <BookShelf key={shelf}\r\n                        shelfTitle={shelfTitle} \r\n                        currentBooks={currentBooks} \r\n                        handleSelect={handleSelect} \r\n                        shelf={shelf} \r\n                    />\r\n                )}\r\n            </div>\r\n            <div className=\"open-search\">\r\n                <Link to=\"/search\" className=\"button\">Add a book</Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport * as BooksAPI from './BooksAPI'\r\nimport './App.css'\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\nimport Search from './components/Search'\r\nimport Home from './components/Home'\r\n\r\nclass BooksApp extends React.Component {\r\n  state = {\r\n      value: '',\r\n      timeout: null,\r\n      searchedBooks: [],\r\n      currentBooks: [],\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const currentBooks = await BooksAPI.getAll();\r\n    this.setState({currentBooks});\r\n  }\r\n\r\n  debounce = (fn,delay) => {\r\n      return (e) => {\r\n          e.persist();\r\n          this.setState({value: e.target.value}); \r\n          clearTimeout(this.state.timeout);\r\n          const timeout = setTimeout(() => fn(e),delay)\r\n          this.setState({timeout});\r\n      }\r\n  }\r\n\r\n  handleChange = async (e) => {\r\n    const currentBooks = this.state.currentBooks;\r\n    let   searchedBooks = e.target.value ? await BooksAPI.search(this.state.value) : [];\r\n          searchedBooks = searchedBooks.error ? [] : searchedBooks;\r\n          searchedBooks = searchedBooks.map(book => currentBooks.find(({id,shelf}) => id === book.id && {...book,shelf}) || {...book,shelf:'none'} );\r\n    this.setState({searchedBooks});\r\n  }\r\n\r\n  handleSelect = async (e,id) => {\r\n      await BooksAPI.update(id, e.target.value);\r\n      const currentBooks = await BooksAPI.getAll();\r\n      const searchedBooks = this.state.searchedBooks.map(book => currentBooks.find(({id,shelf}) => id === book.id && {...book,shelf}) || {...book,shelf:'none'} );\r\n      this.setState({searchedBooks,currentBooks});\r\n  }  \r\n\r\n  render() {\r\n    const {value,searchedBooks,currentBooks} = this.state;\r\n    const debounced = this.debounce(this.handleChange,200);\r\n\r\n    return (\r\n      <BrowserRouter>\r\n      <div className=\"app\">\r\n        <Route path=\"/search\" render={props => \r\n            <Search {...props} \r\n                onShelfChange={debounced} \r\n                value={value} \r\n                searchedBooks={searchedBooks} \r\n                handleSelect={this.handleSelect} \r\n            />} \r\n        />\r\n\r\n        <Route exact path=\"/\" render={props => \r\n            <Home {...props} \r\n                currentBooks={currentBooks} \r\n                handleSelect={this.handleSelect} \r\n            />}\r\n        />\r\n      </div>\r\n      </BrowserRouter>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BooksApp","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}